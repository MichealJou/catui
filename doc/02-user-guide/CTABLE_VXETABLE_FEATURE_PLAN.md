# CTable 对齐 vxe-table 功能计划

更新时间：2026-02-15

## 目标

在不删除现有能力的前提下，持续扩展 `CTable`，逐步覆盖 `vxe-table` 的核心表格能力。  
说明：`vxe-table` 的“企业版/高级插件能力”会单独列为后续阶段。

## 功能基线来源

- vxe-table 官方仓库 README（功能点章节）：
  - [https://github.com/x-extends/vxe-table](https://github.com/x-extends/vxe-table)

## 当前能力盘点（CTable）

已具备：

- 基础渲染、虚拟滚动（VTable）
- 三套主题（Ant Design / Element Plus / Naive）
- 斑马线、边框、固定列（左右）
- 复选框选择、序号列、分页（可开关）
- 单列排序（本地/远程）
- 列筛选（基础）
- 加载态（内置 + 适配器 + 插槽）

## 对齐清单（按优先级）

状态定义：`[x] 已完成` / `[~] 进行中` / `[ ] 待实现` / `[E] 企业版或高级扩展`

### P0：核心数据交互

- [~] 筛选：本地筛选、远程筛选、受控/非受控、清空筛选
- [ ] 排序：多列排序、排序优先级、受控/非受控统一
- [x] 分页：基础分页、页大小、快速跳转、总数
- [x] 选择：单选/多选、全选、受控 keys
- [ ] 行展开：展开行内容、展开状态受控
- [ ] 树形数据：层级展开/折叠、默认展开策略

### P1：列能力

- [x] 固定列（左/右）
- [x] 列宽调整（基础）
- [ ] 列显隐（动态配置）
- [ ] 列拖拽排序
- [ ] 表头分组（多级表头）
- [ ] 列状态持久化（宽度/顺序/显隐）

### P1：编辑与校验

- [ ] 单元格编辑（输入/选择/日期）
- [ ] 行编辑模式
- [ ] 校验规则与错误提示
- [ ] 编辑态提交/回滚

### P2：高级交互

- [ ] 右键菜单
- [ ] 键盘导航（上下左右/Enter）
- [ ] 复制/粘贴（范围）
- [ ] 区域选择
- [ ] 合并单元格（基础）

### P2：数据与性能

- [x] 大数据量渲染（10万/100万）
- [ ] 远程分页/远程筛选/远程排序统一 query 管线
- [ ] 数据代理（统一 request 拦截与错误处理）
- [ ] 增量更新 API（append/update/remove）

### P3：导入导出与生态

- [ ] CSV/Excel 导出
- [ ] CSV/Excel 导入
- [ ] 打印
- [ ] i18n 文案包
- [ ] 无障碍（ARIA/键盘焦点）

### Enterprise / 高级扩展（后续）

- [E] 权限控制（列级/单元格级）
- [E] 数据权限脱敏
- [E] 复杂统计报表/透视分析
- [E] 服务端公式与审计轨迹

## 执行顺序（逐项做完即验收）

1. 完成筛选能力闭环（本地/远程/受控/非受控/清空）
2. 完成排序增强（多列 + 本地/远程统一）
3. 完成展开行与树形数据
4. 完成列显隐、列拖拽、表头分组
5. 完成编辑体系（单元格/行编辑 + 校验）
6. 完成导入导出与键盘交互

## 验收规则

- 每实现一个功能点都执行：
  - `pnpm --filter @catui/demo build`
  - 对应 demo 手工验证
  - 文档更新（README + 本计划）
- 未通过则不进入下一项。
