# CatUI è¡¨æ ¼ç»„ä»¶

åŸºäº **@visactor/vtable** çš„é«˜æ€§èƒ½ Canvas è¡¨æ ¼ç»„ä»¶ã€‚

## âœ¨ ç‰¹æ€§

- ğŸš€ **ç™¾ä¸‡çº§æ•°æ®æ¸²æŸ“** - åŸºäº VTable è™šæ‹Ÿæ»šåŠ¨å¼•æ“
- âš¡ **é«˜åº¦å¯é…ç½®** - å®Œæ•´çš„è¡Œåˆ—é…ç½®
- ğŸ¨ **å¤šä¸»é¢˜æ”¯æŒ** - Ant Design Vue / Element Plus / Naive UI
- ğŸ§© **ä¸‰æ¡†æ¶åˆ†é¡µé€‚é…** - Pagination è‡ªåŠ¨é€‚é… Ant / Element / Naiveï¼ˆå¤±è´¥è‡ªåŠ¨å›é€€å†…ç½®ï¼‰
- ğŸ“Œ **æ–‘é©¬çº¿** - å¯é…ç½®çš„äº¤æ›¿è¡ŒèƒŒæ™¯è‰²
- ğŸ¯ **æ™ºèƒ½æ›´æ–°** - æµ…å±‚æ¯”è¾ƒï¼Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“

## ğŸ“¦ æ€§èƒ½ä¼˜åŒ–

### å·²å®ç°çš„ä¼˜åŒ–

1. **æµ…å±‚æ•°æ®æ¯”è¾ƒ**
   - é¿å…æ·±åº¦éå†å¤§æ•°ç»„
   - åªåœ¨æ•°æ®å¼•ç”¨çœŸæ­£æ”¹å˜æ—¶æ‰æ›´æ–°è¡¨æ ¼
   - æ€§èƒ½æå‡ï¼š**99%+**

2. **æµ…å±‚åˆ—é…ç½®æ¯”è¾ƒ**
   - æ¯”è¾ƒåˆ—å…³é”®å­—æ®µè€Œéæ·±åº¦å¯¹è±¡æ¯”è¾ƒ
   - é¿å…ä¸å¿…è¦çš„åˆ—æ›´æ–°
   - æ€§èƒ½æå‡ï¼š**100%**

3. **ä¸»é¢˜åŠ¨æ€æ›´æ–°**
   - å°è¯•ä½¿ç”¨ VTable åŸç”Ÿ API (`setTheme`, `setColumns`)
   - é¿å…å®Œå…¨é”€æ¯é‡å»ºè¡¨æ ¼

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| è™šæ‹Ÿæ»šåŠ¨ | æ”¯æŒç™¾ä¸‡çº§æ•°æ®æµç•…æ¸²æŸ“ |
| å›ºå®šåˆ— | å·¦ä¾§/å³ä¾§åˆ—å›ºå®š |
| åˆ—å®½è°ƒæ•´ | æ‹–æ‹½è°ƒæ•´åˆ—å®½ |
| è¡Œé€‰æ‹© | å¤é€‰æ¡†/å•é€‰æ¡†ï¼Œæ”¯æŒå—æ§/éå—æ§æ¨¡å¼ |
| æ’åº | å•åˆ—/å¤šåˆ—æ’åºï¼Œè‡ªå®šä¹‰æ’åºå‡½æ•° |
| ç­›é€‰ | åˆ—çº§ç­›é€‰ï¼Œè‡ªå®šä¹‰ç­›é€‰å‡½æ•° |
| è‡ªå®šä¹‰æ¸²æŸ“ | æ”¯æŒè‡ªå®šä¹‰å•å…ƒæ ¼/è¡¨å¤´æ¸²æŸ“ |
| æ–‘é©¬çº¿ | äº¤æ›¿è¡ŒèƒŒæ™¯è‰²ï¼Œå¯é…ç½®é¢œè‰² |
| ä¸»é¢˜åˆ‡æ¢ | 6 ç§é¢„è®¾ä¸»é¢˜ + è‡ªå®šä¹‰ä¸»é¢˜ |
| åˆ†é¡µé›†æˆ | å†…ç½®åˆ†é¡µç»„ä»¶ï¼Œæ”¯æŒå®Œæ•´é…ç½® |
| ç¼–è¾‘èƒ½åŠ› | æ”¯æŒå•å…ƒæ ¼ç¼–è¾‘ä¸è¡Œç¼–è¾‘ï¼ˆclick/dblclick/enter/manualï¼‰ |
| é”®ç›˜ä¸å‰ªè´´æ¿ | æ”¯æŒæ–¹å‘é”®å¯¼èˆªã€Enter ç¼–è¾‘ã€Ctrl/Cmd+C/V |
| åˆå¹¶å•å…ƒæ ¼ | æ”¯æŒ `mergeCells` ä¸åˆ—çº§ `rowSpan/colSpan` åŸºç¡€èƒ½åŠ› |

### ç¼–è¾‘å™¨è§„èŒƒï¼ˆå«æ—¶é—´é€‚é…ï¼‰

`Column.editor` æ”¯æŒä»¥ä¸‹å†™æ³•ï¼š

- å†…ç½®ç±»å‹ï¼š`'input' | 'password' | 'textarea' | 'number' | 'select' | 'radio' | 'checkbox' | 'switch' | 'date' | 'time' | 'datetime'`
- ç»„ä»¶ç›´ä¼ ï¼š`editor: MyEditorComponent`
- é…ç½®å¯¹è±¡ï¼š

```ts
editor: {
  type: 'input', // å¯é€‰ï¼Œé»˜è®¤ input
  component: MyEditorComponent,
  props: { clearable: true } // æˆ– (ctx) => ({ ... })
}
```

`editorOptions` ç»Ÿä¸€è§„èŒƒï¼š

```ts
editorOptions: {
  placeholder?: string
  options?: Array<{ label: string; value: any }> // select ä½¿ç”¨
  dataSource?: Array<any> | ((ctx) => Array<any> | Promise<Array<any>>) // ä¸‹æ‹‰/å•é€‰æ•°æ®æº
  fieldNames?: { label?: string; value?: string } // æ•°æ®æºå­—æ®µæ˜ å°„
  format?: string
  valueFormat?: string
  props?: Record<string, any>
  formatValue?: (value, ctx) => any // è¡Œæ•°æ® -> ç¼–è¾‘å™¨å€¼
  parse?: (value, ctx) => any       // ç¼–è¾‘å™¨å€¼ -> è¡Œæ•°æ®
}
```

ä¸‰å¤§ UI æ—¶é—´ç»„ä»¶é€‚é…ï¼š

- Ant Design Vue
  - `date` -> `DatePicker`
  - `time` -> `TimePicker`
  - `datetime` -> `DatePicker(showTime)`
- Element Plus
  - `date` -> `ElDatePicker(type='date')`
  - `time` -> `ElTimePicker`
  - `datetime` -> `ElDatePicker(type='datetime')`
- Naive UI
  - `date` -> `NDatePicker(type='date')`
  - `time` -> `NTimePicker`
  - `datetime` -> `NDatePicker(type='datetime')`

è‡ªå®šä¹‰è¾“å…¥ç»„ä»¶çº¦å®šï¼š

- ç»„ä»¶å¯æ¥æ”¶ `value` / `modelValue`ï¼Œå¹¶é€šè¿‡ä»¥ä¸‹ä»»ä¸€äº‹ä»¶å›ä¼ å€¼ï¼š
  - `update:value`
  - `update:modelValue`
  - `change`
- ä¼šé¢å¤–é€ä¼ ä¸Šä¸‹æ–‡å±æ€§ï¼š`record`ã€`column`ã€`field`

ä¸‹æ‹‰/å•é€‰æ•°æ®æºé€‚é…è¯´æ˜ï¼š

- `options` ä¸ `dataSource` éƒ½æ”¯æŒï¼Œä¼˜å…ˆä½¿ç”¨ `options`
- `dataSource` æ”¯æŒåŒæ­¥æ•°ç»„æˆ–å¼‚æ­¥ Promise
- æ•°æ®é¡¹æ”¯æŒä»»æ„ç»“æ„ï¼Œé…åˆ `fieldNames` æ˜ å°„ä¸º `{ label, value }`

## ğŸ“– API å‚è€ƒ

### åŸºç¡€ç”¨æ³•

```vue
<template>
<CTable
  :columns="columns"
  :data="data"
  header-align="center"
  default-align="center"
  :row-key="'id'"
  :stripe="true"
  stripe-color="#f0f0f0"
  @row-click="handleRowClick"
/>
</template>
```

### åˆ—é…ç½® (Column)

```typescript
const columns: Column[] = [
  {
    key: 'name',
    title: 'å§“å',
    width: 200,
    hidden: false,
    fixed: 'left',
    sortable: true,
    filterable: true,
    customRender: ({ value }) => {
      return h('span', { class: 'user-name' }, value)
    }
  },
  {
    key: 'email',
    title: 'é‚®ç®±',
    width: 300,
    resizable: true
  }
]
```

å¯¹é½è§„åˆ™ï¼š

- è¡¨å¤´é»˜è®¤å±…ä¸­ï¼š`headerAlign='center'`
- æ•°æ®åˆ—é»˜è®¤å±…ä¸­ï¼š`defaultAlign='center'`
- å•åˆ—å¯é€šè¿‡ `column.align` å’Œ `column.headerAlign` è¦†ç›–ï¼ˆ`left | center | right`ï¼‰

å¯é€šè¿‡ `hidden` åŠ¨æ€æ§åˆ¶åˆ—æ˜¾éšï¼ˆé…åˆå“åº”å¼åˆ—é…ç½®ï¼‰ï¼š

```ts
columns.value = columns.value.map(col =>
  col.key === 'email' ? { ...col, hidden: true } : col
)
```

### æ’åºæ¨¡å¼ï¼ˆæœ¬åœ° / è¿œç¨‹ï¼‰

`CTable` æ”¯æŒä¸¤ç§æ’åºæ¨¡å¼ï¼š

- `sortMode="local"`ï¼šæœ¬åœ°æ’åºï¼ˆé»˜è®¤ï¼‰
- `sortMode="remote"`ï¼šè¿œç¨‹æ’åºï¼ˆä»…æŠ›å‡ºæ’åºäº‹ä»¶ï¼Œä¸æ”¹æœ¬åœ°æ•°æ®é¡ºåºï¼‰

#### 1) æœ¬åœ°æ’åºï¼ˆé»˜è®¤å†…ç½®æ¯”è¾ƒï¼‰

```vue
<CTable
  :columns="columns"
  :data="data"
  sort-mode="local"
/>
```

```ts
const columns: Column[] = [
  { key: 'id', title: 'ID', dataIndex: 'id', sortable: true },
  { key: 'age', title: 'å¹´é¾„', dataIndex: 'age', sortable: true }
]
```

#### 2) æœ¬åœ°æ’åºï¼ˆåˆ—çº§è‡ªå®šä¹‰ sorterï¼‰

```ts
const columns: Column[] = [
  {
    key: 'name',
    title: 'å§“å',
    dataIndex: 'name',
    sortable: true,
    sorter: (a, b) => String(a.name).localeCompare(String(b.name))
  }
]
```

#### 3) æœ¬åœ°æ’åºï¼ˆå…¨å±€ localSorter æ‰©å±•ç‚¹ï¼‰

```vue
<CTable
  :columns="columns"
  :data="data"
  sort-mode="local"
  :local-sorter="localSorter"
/>
```

```ts
const localSorter = (a: any, b: any, column: Column, order: 'asc' | 'desc' | null) => {
  const field = (column.dataIndex as string) || column.key
  const va = a?.[field]
  const vb = b?.[field]
  if (typeof va === 'number' && typeof vb === 'number') return va - vb
  return String(va ?? '').localeCompare(String(vb ?? ''))
}
```

#### 4) è¿œç¨‹æ’åºï¼ˆæœåŠ¡ç«¯æ’åºï¼‰

```vue
<CTable
  :columns="columns"
  :data="data"
  sort-mode="remote"
  :on-sort-request="handleSortRequest"
  @sort-change="handleSortChange"
/>
```

```ts
const handleSortRequest = async (sorter: SorterConfig, sorters?: SorterConfig[]) => {
  // æ ¹æ® sorter.field / sorter.order è¯·æ±‚åç«¯ï¼Œç„¶åå›å†™ data
  // sorter.order: 'asc' | 'desc' | null
  // sorters: å¤šåˆ—æ’åºçŠ¶æ€ï¼ˆæœ‰ multiple æ—¶ï¼‰
  const res = await fetchUsers({ sortField: sorter.field, sortOrder: sorter.order })
  data.value = res.list
}
```

> è¯´æ˜ï¼šå½“ `sortMode='remote'` æ—¶ï¼Œç»„ä»¶ä¸ä¼šåšæœ¬åœ°æ’åºï¼›ç”±ä¸šåŠ¡å±‚æ§åˆ¶æ•°æ®æ›´æ–°ã€‚

#### 5) å¤šåˆ—æ’åºï¼ˆmultiple ä¼˜å…ˆçº§ï¼‰

`multiple` æ•°å€¼è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚

```ts
const columns: Column[] = [
  {
    key: 'role',
    title: 'è§’è‰²',
    dataIndex: 'role',
    sorter: { sorter: (a, b) => String(a.role).localeCompare(String(b.role)), multiple: 20 },
    sortOrder: 'asc'
  },
  {
    key: 'age',
    title: 'å¹´é¾„',
    dataIndex: 'age',
    sorter: { sorter: (a, b) => a.age - b.age, multiple: 10 },
    sortOrder: 'desc'
  }
]
```

ä¹Ÿå¯é€šè¿‡ `sortConfig` ç»Ÿä¸€å—æ§ï¼š

```vue
<CTable
  :columns="columns"
  :data="data"
  :sort-config="[
    { field: 'role', order: 'asc', multiple: 20 },
    { field: 'age', order: 'desc', multiple: 10 }
  ]"
/>
```

### åˆ—ç­›é€‰

ç­›é€‰é€šè¿‡åˆ—é…ç½® `filters` + å¯é€‰ `onFilter` å®ç°ï¼š

```ts
const columns: Column[] = [
  {
    key: 'role',
    title: 'è§’è‰²',
    dataIndex: 'role',
    filters: [
      { text: 'ç®¡ç†å‘˜', value: 'ç®¡ç†å‘˜' },
      { text: 'æ™®é€šç”¨æˆ·', value: 'æ™®é€šç”¨æˆ·' },
      { text: 'è®¿å®¢', value: 'è®¿å®¢' }
    ]
  },
  {
    key: 'status',
    title: 'çŠ¶æ€',
    dataIndex: 'status',
    filters: [
      { text: 'åœ¨èŒ', value: 'åœ¨èŒ' },
      { text: 'ç¦»èŒ', value: 'ç¦»èŒ' },
      { text: 'ä¼‘å‡', value: 'ä¼‘å‡' }
    ],
    onFilter: (value, record) => record.status === value
  }
]
```

ç­›é€‰äº‹ä»¶ï¼š

```vue
<CTable
  :columns="columns"
  :data="data"
  @filter-change="handleFilterChange"
/>
```

```ts
const handleFilterChange = (filters: Array<{ field: string; values: any[] }>) => {
  console.log(filters)
}
```

### ç­›é€‰æ¨¡å¼ï¼ˆæœ¬åœ° / è¿œç¨‹ï¼‰

- `filterMode="local"`ï¼šæœ¬åœ°ç­›é€‰ï¼ˆé»˜è®¤ï¼‰
- `filterMode="remote"`ï¼šè¿œç¨‹ç­›é€‰ï¼ˆä»…æŠ›å‡ºç­›é€‰æ¡ä»¶ï¼Œç”±ä¸šåŠ¡å±‚æ›´æ–°æ•°æ®ï¼‰

```vue
<CTable
  :columns="columns"
  :data="data"
  filter-mode="remote"
  :on-filter-request="handleFilterRequest"
  @change="handleTableChange"
/>
```

```ts
const handleFilterRequest = async (filters: Record<string, any[]>) => {
  // æ ¹æ® filters è¯·æ±‚åç«¯å¹¶å›å†™ data
  const res = await fetchUsers({ filters })
  data.value = res.list
}

const handleTableChange = (pagination, filters, sorter) => {
  // filters ç»“æ„ï¼š{ role: ['ç®¡ç†å‘˜'], status: ['åœ¨èŒ'] }
  console.log(filters)
}
```

### ç»Ÿä¸€è¿œç¨‹æŸ¥è¯¢ç®¡çº¿ï¼ˆæ’åº/ç­›é€‰/åˆ†é¡µï¼‰

```vue
<CTable
  :columns="columns"
  :data="data"
  sort-mode="remote"
  filter-mode="remote"
  pagination-mode="remote"
  :on-query-request="handleQueryRequest"
/>
```

```ts
const handleQueryRequest = async ({ pagination, filters, sorter, sorters }) => {
  // ç»Ÿä¸€è¯·æ±‚å‚æ•°ï¼šåˆ†é¡µ + ç­›é€‰ + æ’åº
  // pagination: { current, pageSize, total? }
  // sorter: å½“å‰ä¸»æ’åº
  // sorters: å¤šåˆ—æ’åºçŠ¶æ€
  const res = await fetchUsers({ pagination, filters, sorter, sorters })
  data.value = res.list
}
```

### è¡Œé€‰æ‹© (RowSelection)

```typescript
const rowSelection: RowSelectionConfig = {
  type: 'checkbox',
  selectedRowKeys: ['1', '2', '3'],
  onChange: (selectedRows, selectedKeys) => {
    console.log('é€‰ä¸­è¡Œï¼š', selectedRows)
  }
}
```

### ä¸»é¢˜é…ç½®

```typescript
// ä½¿ç”¨é¢„è®¾ä¸»é¢˜
<CTable theme="ant-design-dark" />

// è‡ªå®šä¹‰ä¸»é¢˜
<CTable
  :theme="{
    colors: {
      primary: '#1677ff',
      background: '#ffffff',
      border: '#e8e8e8',
      stripe: '#fafafa' // æ–‘é©¬çº¿é¢œè‰²
    }
  }"
/>
```

### åˆ†é¡µé…ç½® (Pagination)

æ¼”ç¤ºåº”ç”¨ä¸­çš„å®Œæ•´åˆ†é¡µé…ç½®ç¤ºä¾‹ï¼ˆå‚è€ƒ [CanvasTableDemo.vue](../../apps/demo/src/views/CanvasTableDemo.vue#L211-L231)ï¼‰ï¼š

```typescript
const paginationConfig = computed(() => {
  if (!showPagination.value) return false
  return {
    current: paginationCurrent.value,        // å½“å‰é¡µ
    pageSize: paginationPageSize.value,      // æ¯é¡µæ¡æ•°
    total: data.value.length,               // æ€»æ•°æ®é‡
    showSizeChanger: true,                // æ˜¾ç¤ºé¡µå¤§å°åˆ‡æ¢å™¨
    showQuickJumper: true,                 // æ˜¾ç¤ºå¿«é€Ÿè·³è½¬
    pageSizeOptions: [10, 20, 50, 100],   // é¡µå¤§å°é€‰é¡¹
    showTotal: (total: number, range: [number, number]) =>
      `ç¬¬ ${range[0]}-${range[1]} æ¡ / å…± ${total} æ¡`,
    onChange: (page: number, pageSize: number) => {      // é¡µç /é¡µå¤§å°å˜åŒ–å›è°ƒ
      paginationCurrent.value = page
      paginationPageSize.value = pageSize
    }
  }
})
```

**åŠŸèƒ½è¯´æ˜**ï¼š
- **showSizeChanger**: æ˜¾ç¤ºæ¯é¡µæ¡æ•°é€‰æ‹©å™¨
- **showQuickJumper**: æ˜¾ç¤ºå¿«é€Ÿè·³è½¬è¾“å…¥æ¡†
- **pageSizeOptions**: å¯é€‰çš„æ¯é¡µæ¡æ•°
- **showTotal**: è‡ªå®šä¹‰æ€»æ•°æ˜¾ç¤ºæ ¼å¼

### ä¸»é¢˜é…ç½® (Theme)

æ¼”ç¤ºåº”ç”¨ä¸­çš„ä¸»é¢˜åˆ‡æ¢ç¤ºä¾‹ï¼ˆå‚è€ƒ [CanvasTableDemo.vue](../../apps/demo/src/views/CanvasTableDemo.vue#L290-L319)ï¼‰ï¼š

```typescript
// 1. å®šä¹‰ä¸»é¢˜é€‰é¡¹
const themes: Array<{ value: ThemePreset; label: string; color: string }> = [
  { value: 'ant-design', label: 'Ant Design', color: '#1677ff' },
  { value: 'element-plus', label: 'Element Plus', color: '#409eff' },
  { value: 'naive', label: 'Naive UI', color: '#18a058' }
]

// 2. ä½¿ç”¨ ref ç®¡ç†å½“å‰ä¸»é¢˜
const currentTheme = ref<ThemePreset>('ant-design')

// 3. åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨
<CTable :theme="currentTheme" />

// 4. åˆ‡æ¢ä¸»é¢˜
const switchTheme = (theme: ThemePreset) => {
  currentTheme.value = theme
}
```

### åŠ¨æ€åˆ—ç”Ÿæˆ (Dynamic Columns)

æ¼”ç¤ºåº”ç”¨æ”¯æŒåŠ¨æ€ç”Ÿæˆ 10-100 åˆ—ï¼ˆå‚è€ƒ [CanvasTableDemo.vue](../../apps/demo/src/views/CanvasTableDemo.vue#L244-L271)ï¼‰ï¼š

```typescript
// åŠ¨æ€ç”Ÿæˆåˆ—é…ç½®
const buildColumns = (count: number): Column[] => {
  const cols: Column[] = []

  for (let i = 0; i < count; i += 1) {
    if (i < templateColumns.length) {
      // ä½¿ç”¨é¢„å®šä¹‰æ¨¡æ¿
      const tpl = templateColumns[i]
      cols.push({
        ...tpl,
        key: `${tpl.key}__${i + 1}`  // ç¡®ä¿ key å”¯ä¸€
      })
      continue
    }

    // åŠ¨æ€ç”Ÿæˆé¢å¤–åˆ—
    cols.push({
      key: `metric_${i}`,
      title: `æŒ‡æ ‡${i}`,
      dataIndex: 'id',
      width: 110,
      align: 'right',
      render: (record: any) => {
        // è‡ªå®šä¹‰æ¸²æŸ“é€»è¾‘
        const value = calculateMetric(record, i)
        return value.toLocaleString()
      }
    })
  }

  return cols
}

// ä½¿ç”¨è®¡ç®—å±æ€§
const tableColumns = computed<Column[]>(() => {
  const cols = buildColumns(columnCount.value)

  // é…ç½®å›ºå®šåˆ—
  if (cols.length > 0) {
    cols[cols.length - 1] = {
      ...cols[cols.length - 1],
      fixed: 'right'
    }
  }

  return cols
})
```

### ç±»å‹å®šä¹‰ (TypeScript)

å®Œæ•´çš„ç±»å‹å¯¼å…¥å’Œå®šä¹‰ç¤ºä¾‹ï¼š

```typescript
// å¯¼å…¥ç±»å‹
import CTable, {
  type Column,
  type ThemePreset,
  type RowSelectionConfig
} from '@catui/ctable'

// å®šä¹‰æ•°æ®è¡Œç±»å‹
type DemoTableRow = {
  id: string | number
  name: string
  age: number
  address: string
  email: string
  role: string
  status: string
}

const data = ref<DemoTableRow[]>([])
```

## ğŸ”§ å¼€å‘æŒ‡å—

### è¿è¡Œå¼€å‘

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev:demo

# ç±»å‹æ£€æŸ¥ï¼ˆç›‘å¬æ¨¡å¼ï¼‰
pnpm type-check --watch

# ä»£ç æ£€æŸ¥
pnpm lint:fix
```

### æ„å»ºæ‰“åŒ…

```bash
# æ„å»º ctable åŒ…
pnpm --filter @catui/ctable build

# æ„å»º demo
pnpm build:demo
```

### æœ€ä½³å®è·µ

1. **ä½¿ç”¨æµ…å±‚æ¯”è¾ƒ**
   ```typescript
   // âœ… æ¨è
   if (data !== lastData) {
     vtableAdapter.updateData(data)
   }

   // âŒ é¿å…
   if (JSON.stringify(data) !== JSON.stringify(lastData)) {
     vtableAdapter.updateData(data)
   }
   ```

2. **é¿å…æ·±åº¦ç›‘å¬**
   ```typescript
   // âœ… æ¨è
   watch(() => props.data, (newData, oldData) => {
     if (newData !== oldData) {
       vtableAdapter?.updateData(newData)
     }
   })

   // âŒ é¿å…
   watch(() => props.data, (newData) => {
     vtableAdapter?.updateData(newData)
   }, { deep: true })
   ```

3. **ä¼˜å…ˆä½¿ç”¨ VTable åŸç”Ÿ API**
   ```typescript
   // å°è¯•ä½¿ç”¨ VTable çš„ API
   if (typeof table.setColumns === 'function') {
     table.setColumns(newColumns)
   }

   // é™çº§æ–¹æ¡ˆ
   vtableAdapter.destroy()
   vtableAdapter.create()
   ```

### åˆ—æ‹–æ‹½ï¼ˆåŸºç¡€ï¼‰

è®¾ç½®åˆ— `draggable: true` åï¼Œå¯æ‹–æ‹½è°ƒæ•´åˆ—é¡ºåºï¼š

```ts
const columns: Column[] = [
  { key: 'id', title: 'ID', dataIndex: 'id', draggable: true },
  { key: 'name', title: 'å§“å', dataIndex: 'name', draggable: true }
]
```

### åˆ—æ‹–æ‹½ï¼ˆåˆ†ç»„/è·¨ç»„ï¼‰

```ts
const columns: Column[] = [
  {
    key: 'group_info',
    title: 'åŸºç¡€ä¿¡æ¯',
    children: [
      { key: 'id', title: 'ID', dataIndex: 'id', draggable: true },
      { key: 'name', title: 'å§“å', dataIndex: 'name', draggable: true }
    ]
  },
  {
    key: 'group_metrics',
    title: 'æŒ‡æ ‡',
    children: [
      { key: 'score', title: 'åˆ†æ•°', dataIndex: 'score', draggable: true }
    ]
  }
]
```

```vue
<CTable
  :columns="columns"
  :data="data"
  :column-drag-config="{
    enabled: true,
    isCrossDrag: true,
    showGuidesStatus: true
  }"
  @columns-change="handleColumnsChange"
/>
```

```ts
const handleColumnsChange = (nextColumns: Column[]) => {
  columns.value = nextColumns
}
```

### å®ä¾‹æ–¹æ³•ï¼šCSV å¯¼å‡º

```vue
<CTable ref="tableRef" :columns="columns" :data="data" />
```

```ts
const tableRef = ref<any>()
tableRef.value?.exportCsv?.('users.csv')
```

### å®ä¾‹æ–¹æ³•ï¼šExcel å¯¼å‡º

```ts
const tableRef = ref<any>()
tableRef.value?.exportExcel?.('users.xlsx', 'Users')
```

### å®ä¾‹æ–¹æ³•ï¼šCSV/XLSX å¯¼å…¥

```ts
const tableRef = ref<any>()

// å¯¼å…¥ CSV æ–‡æœ¬
const csvRows = tableRef.value?.importCsvText?.('id,name\n1,Alice', {
  hasHeader: true,
  mode: 'replace'
})

// å¯¼å…¥æ–‡ä»¶ï¼ˆFile å¯¹è±¡ï¼‰
const fileRows = await tableRef.value?.importFile?.(file, {
  mode: 'append',
  sheetName: 'Sheet1'
})
```

```vue
<CTable
  :columns="columns"
  :data="data"
  :on-import-data="(rows, meta) => {
    console.log(meta.source, rows.length)
  }"
/>
```

### å®ä¾‹æ–¹æ³•ï¼šæ‰“å°

```ts
const tableRef = ref<any>()
tableRef.value?.printTable?.('ç”¨æˆ·åˆ—è¡¨æ‰“å°')
```

### å®ä¾‹æ–¹æ³•ï¼šå¢é‡æ•°æ®æ›´æ–°

```ts
const tableRef = ref<any>()

// è¿½åŠ 
tableRef.value?.appendRows?.([{ id: 10001, name: 'æ–°ç”¨æˆ·' }])

// æ›´æ–°ï¼ˆæŒ‰ id/key æˆ–å‡½æ•°ï¼‰
tableRef.value?.updateRow?.(10001, { status: 'åœ¨èŒ' })
tableRef.value?.updateRow?.((row: any) => row.role === 'è®¿å®¢', (row: any) => ({ ...row, status: 'ç¦»èŒ' }))

// åˆ é™¤ï¼ˆæŒ‰ id/keyã€æ•°ç»„æˆ–å‡½æ•°ï¼‰
tableRef.value?.removeRows?.(10001)
tableRef.value?.removeRows?.([10002, 10003])
tableRef.value?.removeRows?.((row: any) => row.status === 'ç¦»èŒ')
```

### å³é”®èœå•ï¼ˆåŸºç¡€ï¼‰

```vue
<CTable
  :columns="columns"
  :data="data"
  :context-menu="{
    items: [
      { key: 'copy-json', label: 'å¤åˆ¶è¡Œæ•°æ®' },
      { key: 'mark-leave', label: 'æ ‡è®°ä¸ºç¦»èŒ' }
    ],
    onClick: (item, ctx) => {
      console.log(item, ctx.row)
    }
  }"
  @context-menu-click="handleContextMenuClick"
/>
```

### å®ä¾‹æ–¹æ³•ï¼šåˆ—ç»“æ„ç®¡ç†

```ts
const tableRef = ref<any>()

// è·å–å½“å‰åˆ—ç»“æ„ï¼ˆå«æ‹–æ‹½ç»“æœï¼‰
const cols = tableRef.value?.getColumns?.()

// é‡ç½®ä¸ºæœ€è¿‘ä¸€æ¬¡å¤–éƒ¨ä¼ å…¥çš„ columns
tableRef.value?.resetColumns?.()

// ç¨‹åºåŒ–è®¾ç½®åˆ—ç»“æ„
tableRef.value?.setColumns?.(nextColumns)
```

### åˆ—çŠ¶æ€æŒä¹…åŒ–ï¼ˆé¡ºåº/æ˜¾éšï¼‰

```vue
<CTable
  ref="tableRef"
  :columns="columns"
  :data="data"
  :column-state-persistence="{
    key: 'my-table-column-state',
    autoLoad: true,
    autoSave: true
  }"
/>
```

```ts
// æ‰‹åŠ¨æ§åˆ¶
tableRef.value?.saveColumnState?.()
tableRef.value?.loadColumnState?.()
tableRef.value?.clearColumnState?.()
```

### å®ä¾‹æ–¹æ³•ï¼šé€‰æ‹©ç®¡ç†

```ts
const tableRef = ref<any>()

// æ¸…ç©ºé€‰æ‹©
tableRef.value?.clearSelection?.()

// åé€‰å½“å‰æ•°æ®é›†ï¼ˆå«åˆ†é¡µ/ç­›é€‰åçš„å½“å‰æ•°æ®æºï¼‰
tableRef.value?.invertSelection?.()
```

### æ’æ§½ï¼šé¡µå¤´ / åˆè®¡ / é¡µå°¾

```vue
<CTable :columns="columns" :data="data">
  <template #header>
    <div style="padding: 8px 12px; font-weight: 600">è‡ªå®šä¹‰é¡µå¤´</div>
  </template>
  <template #summary="{ data: source }">
    <div style="padding: 8px 12px">åˆè®¡è¡Œï¼š{{ source.length }} æ¡</div>
  </template>
  <template #footer>
    <div style="padding: 8px 12px; color: #667085">è‡ªå®šä¹‰é¡µå°¾</div>
  </template>
</CTable>
```

### i18nï¼ˆåŸºç¡€æ–‡æ¡ˆï¼‰

```vue
<CTable
  :columns="columns"
  :data="data"
  locale="en-US"
  :i18n="{
    filterSearch: 'Apply',
    contextCopyJson: 'Copy JSON'
  }"
/>
```

### ç»Ÿä¸€è¿œç¨‹è¯·æ±‚ä»£ç†ï¼ˆrequestProxyï¼‰

```vue
<CTable
  :columns="columns"
  :data="data"
  sort-mode="remote"
  filter-mode="remote"
  pagination-mode="remote"
  :on-query-request="queryUsers"
  :request-proxy="{
    beforeRequest: (query) => ({ ...query, ts: Date.now() }),
    afterRequest: (query) => console.log('done', query),
    onError: (error, query) => console.error('query failed', error, query)
  }"
/>
```

### å°ºå¯¸ä¸è¡Œæ ·å¼

```vue
<CTable
  :columns="columns"
  :data="data"
  size="small"
  :row-style="rowStyle"
/>
```

```ts
const rowStyle = (record: any, index: number) => {
  if (index % 10 === 0) {
    return { fontWeight: 600, color: '#0f172a' }
  }
  return {}
}
```

## ğŸ› è°ƒè¯•

### æ€§èƒ½åˆ†æ

```typescript
// åœ¨ create æ–¹æ³•ä¸­æ·»åŠ æ€§èƒ½æ—¥å¿—
create() {
  console.time('VTableInit')

  // ... è¡¨æ ¼åˆ›å»ºä»£ç 

  console.timeEnd('VTableInit')
  console.log('æ•°æ®é‡ï¼š', this.options.data.length)
  console.log('åˆ—æ•°ï¼š', this.options.columns.length)
}
```

### å¸¸è§é—®é¢˜

**Q: è¡¨æ ¼ä¸æ¸²æŸ“æ•°æ®ï¼Ÿ**
- æ£€æŸ¥ `container` æ˜¯å¦å·²æŒ‚è½½
- ç¡®è®¤ `vtableRef` æ˜¯å¦æœ‰å€¼

**Q: æ–‘é©¬çº¿ä¸ç”Ÿæ•ˆï¼Ÿ**
- ç¡®è®¤ `stripe` å±æ€§è®¾ç½®ä¸º `true`
- æ£€æŸ¥ä¸»é¢˜é…ç½®ä¸­æ˜¯å¦å®šä¹‰äº† `ripeColor`

**Q: æ€§èƒ½é—®é¢˜ï¼Ÿ**
- å‡å°‘æ¯é¡µæ•°æ®é‡ï¼ˆå»ºè®® 100-500 æ¡ï¼‰
- å…³é—­ä¸å¿…è¦çš„å“åº”å¼æ›´æ–°
- ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨è€Œéå…¨é‡æ¸²æŸ“

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é¡¹ç›® README](../../README.md)
- [è´¡çŒ®æŒ‡å—](../../CONTRIBUTING.md)
- [ç±»å‹å®šä¹‰](../types/index.ts)

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-02-13)
- âœ… æ·»åŠ æ–‘é©¬çº¿åŠŸèƒ½ï¼ˆ`stripe` å’Œ `stripeColor`ï¼‰
- âœ… å®ç°æµ…å±‚æ¯”è¾ƒä¼˜åŒ–ï¼ˆ`shallowEqualData`, `shallowEqualColumns`ï¼‰
- âœ… ä¼˜åŒ–ä¸»é¢˜å’Œåˆ—æ›´æ–°é€»è¾‘ï¼ˆå°è¯•ä½¿ç”¨ VTable åŸç”Ÿ APIï¼‰
- âœ… æ·»åŠ æ€§èƒ½ä¼˜åŒ–è¾…åŠ©å‡½æ•°
- ğŸ¨ å®Œå–„ç±»å‹å®šä¹‰ï¼ˆ`loading`, `loadingTip`ï¼‰

---

**ç»´æŠ¤è€…**: CatUI Team
