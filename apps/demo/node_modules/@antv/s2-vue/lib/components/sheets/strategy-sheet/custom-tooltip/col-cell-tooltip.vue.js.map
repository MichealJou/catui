{"version":3,"file":"col-cell-tooltip.vue.js","sources":["../../../../../src/components/sheets/strategy-sheet/custom-tooltip/col-cell-tooltip.vue"],"sourcesContent":["<script lang=\"ts\">\nimport type { Node } from '@antv/s2';\nimport { getStrategySheetTooltipClsName as tooltipCls } from '@antv/s2';\nimport { isFunction } from 'lodash';\nimport { defineComponent, computed, type PropType } from 'vue';\nimport type { CustomTooltipProps } from './interface';\n\nexport default defineComponent({\n  name: 'StrategySheetColCellTooltip',\n  props: {\n    cell: {\n      type: Object as PropType<CustomTooltipProps['cell']>,\n      required: true,\n    },\n    label: {\n      type: [Object, Function] as PropType<CustomTooltipProps['label']>,\n      default: undefined,\n    },\n  },\n  setup(props) {\n    const meta = computed(() => props.cell.getMeta() as Node);\n\n    const shouldHide = computed(() => {\n      // 趋势分析表叶子节点显示是指标标题, tooltip 中没必要再显示了\n      return meta.value.isLeaf && meta.value.level !== 0;\n    });\n\n    const cellName = computed(() => {\n      const m = meta.value;\n      const name = m.spreadsheet.dataSet.getFieldName(m.field!);\n      const customLabel = isFunction(props.label)\n        ? props.label(props.cell, name)\n        : props.label;\n\n      return customLabel ?? name;\n    });\n\n    const cellValue = computed(() => meta.value.value);\n\n    return {\n      tooltipCls,\n      shouldHide,\n      cellName,\n      cellValue,\n    };\n  },\n});\n</script>\n\n<template>\n  <div v-if=\"!shouldHide\" :class=\"[tooltipCls(), tooltipCls('col')]\">\n    <span :class=\"tooltipCls('name')\">{{ cellName }}</span>\n    <span :class=\"tooltipCls('value')\">{{ cellValue }}</span>\n  </div>\n</template>\n\n<style lang=\"less\">\n@import './index.less';\n</style>\n"],"names":["_openBlock","_createElementBlock","tooltipCls","_normalizeClass","cellName","_toDisplayString","cellValue"],"mappings":";;;;;qBAkDE,MAAA,QAAA,QAGM,QAAA,OAAA,UAAA;AAHwB,SAAA,CAAA,KAAA,cAAAA,IAAAA,UAAA,GAAAC,IAAAA,mBAAGC,OAAU;AAAA,IAAA,KAAA;AAAA,IACzC,OAAAC,IAAAA,eAAuD,CAAA,KAAA,WAAA,GAAA,KAAA,WAAA,KAAA,CAAA,CAAA;AAAA,EAAA,GAAA;AAAA,IAAlBC,IAAAA,mBAAAA,QAAAA;AAAAA,MACrC,OAAAD,IAAAA,eAAyD,KAAA,WAAA,MAAA,CAAA;AAAA,IAAA,GAAlDE,oBAAK,KAAEH,QAAAA,GAAAA,CAAAA;AAAAA,IAAAA,IAAAA,mBAAwBI,QAAAA;AAAAA,MAAAA,OAAAA,IAAAA,eAAAA,KAAAA,WAAAA,OAAAA,CAAAA;AAAAA;;;;;"}