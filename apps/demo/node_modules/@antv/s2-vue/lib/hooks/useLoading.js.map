{"version":3,"file":"useLoading.js","sources":["../../src/hooks/useLoading.ts"],"sourcesContent":["import { S2Event, type SpreadSheet } from '@antv/s2';\nimport { ref, watch, type Ref, type ShallowRef } from 'vue';\n\nexport const useLoading = (\n  s2Ref: ShallowRef<SpreadSheet | undefined>,\n  loadingProp: Ref<boolean | undefined>,\n) => {\n  const loading = ref<boolean>(loadingProp.value ?? false);\n  const setLoading = (updated: boolean) => {\n    loading.value = updated;\n  };\n\n  // 监听外部传入的 loading prop 变化\n  watch(loadingProp, (newLoading) => {\n    loading.value = newLoading ?? false;\n  });\n\n  watch(s2Ref, (s2) => {\n    s2?.on(S2Event.LAYOUT_BEFORE_RENDER, () => {\n      setLoading(true);\n    });\n\n    s2?.on(S2Event.LAYOUT_AFTER_RENDER, () => {\n      setLoading(false);\n    });\n  });\n\n  return { loading, setLoading };\n};\n"],"names":["ref","watch","s2","S2Event"],"mappings":";;;;AAGO,MAAM,aAAa,CACxB,OACA,gBACG;;AACH,QAAM,UAAUA,IAAAA,KAAa,iBAAY,UAAZ,YAAqB,KAAK;AACvD,QAAM,aAAa,CAAC,YAAqB;AACvC,YAAQ,QAAQ;AAAA,EAClB;AAGAC,YAAM,aAAa,CAAC,eAAe;AACjC,YAAQ,QAAQ,kCAAc;AAAA,EAChC,CAAC;AAEDA,YAAM,OAAO,CAACC,SAAO;AACnBA,iCAAI,GAAGC,WAAQ,sBAAsB,MAAM;AACzC,iBAAW,IAAI;AAAA,IACjB;AAEAD,iCAAI,GAAGC,WAAQ,qBAAqB,MAAM;AACxC,iBAAW,KAAK;AAAA,IAClB;AAAA,EACF,CAAC;AAED,SAAO,EAAE,SAAS,WAAA;AACpB;;"}