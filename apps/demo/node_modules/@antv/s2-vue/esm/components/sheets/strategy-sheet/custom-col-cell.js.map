{"version":3,"file":"custom-col-cell.js","sources":["../../../../src/components/sheets/strategy-sheet/custom-col-cell.ts"],"sourcesContent":["import {\n  ColCell,\n  Node,\n  SpreadSheet,\n  drawCustomContent,\n  safeJsonParse,\n  type ColHeaderConfig,\n  type MultiData,\n} from '@antv/s2';\nimport { isArray } from 'lodash';\n\n/**\n * Cell for StrategySheet\n * -------------------------------------\n * |       root label      |\n * | label1 label2  label3 |\n * --------------------------------------\n */\nexport class StrategySheetColCell extends ColCell {\n  constructor(\n    meta: Node,\n    spreadsheet: SpreadSheet,\n    headerConfig: ColHeaderConfig,\n  ) {\n    super(meta, spreadsheet, headerConfig);\n  }\n\n  public drawTextShape() {\n    const meta = this.getMeta();\n    const value = safeJsonParse<MultiData>(meta?.value);\n\n    if (!isArray(value)) {\n      return super.drawTextShape();\n    }\n\n    const { formattedValue } = this.getFormattedFieldValue();\n    const displayValues =\n      formattedValue !== meta?.value ? [[formattedValue]] : [value];\n\n    drawCustomContent(\n      this,\n      {\n        values: displayValues,\n      },\n      false,\n    );\n  }\n}\n"],"names":[],"mappings":";;AAkBO,MAAM,6BAA6B,QAAQ;AAAA,EAChD,YACE,MACA,aACA,cACA;AACA,UAAM,MAAM,aAAa,YAAY;AAAA,EACvC;AAAA,EAEO,gBAAgB;AACrB,UAAM,OAAO,KAAK,QAAA;AAClB,UAAM,QAAQ,cAAyB,6BAAM,KAAK;AAElD,QAAI,CAAC,QAAQ,KAAK,GAAG;AACnB,aAAO,MAAM,cAAA;AAAA,IACf;AAEA,UAAM,EAAE,eAAA,IAAmB,KAAK,uBAAA;AAChC,UAAM,gBACJ,oBAAmB,6BAAM,SAAQ,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK;AAE9D;AAAA,MACE;AAAA,MACA;AAAA,QACE,QAAQ;AAAA,MAAA;AAAA,MAEV;AAAA,IAAA;AAAA,EAEJ;AACF;"}