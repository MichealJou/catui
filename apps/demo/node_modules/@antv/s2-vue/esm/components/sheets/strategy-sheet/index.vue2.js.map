{"version":3,"file":"index.vue2.js","sources":["../../../../src/components/sheets/strategy-sheet/index.vue"],"sourcesContent":["<script lang=\"ts\">\nimport {\n  Node,\n  SpreadSheet,\n  customMerge,\n  type ColHeaderConfig,\n  type S2Options,\n} from '@antv/s2';\nimport { isEmpty, size } from 'lodash';\nimport { computed, defineComponent, toRefs } from 'vue';\nimport { useExpose } from '../../../hooks/useExpose';\nimport type { BaseSheetInitEmits } from '../../../interface';\nimport { initBaseSheetProps } from '../../../utils/initPropAndEmits';\nimport BaseSheet from '../base-sheet.vue';\nimport { StrategySheetColCell } from './custom-col-cell';\nimport { StrategySheetDataCell } from './custom-data-cell';\nimport { StrategySheetDataSet } from './custom-data-set';\n\nexport default defineComponent({\n  name: 'StrategySheet',\n  props: initBaseSheetProps(),\n  emits: [] as unknown as BaseSheetInitEmits,\n  setup(props, ctx) {\n    const s2Ref = useExpose(ctx.expose);\n    const { options, themeCfg, dataCfg } = toRefs(props);\n\n    const strategySheetOptions = computed<Partial<S2Options> | null>(() => {\n      if (isEmpty(dataCfg.value)) {\n        return null;\n      }\n\n      // 单指标非自定义树结构隐藏指标列\n      const shouldHideValue = size(dataCfg.value?.fields?.values) === 1;\n\n      return {\n        hierarchyType: 'tree',\n        dataCell: (viewMeta, spreadsheet) =>\n          new StrategySheetDataCell(viewMeta, spreadsheet),\n        colCell: (\n          node: Node,\n          spreadsheet: SpreadSheet,\n          headerConfig: ColHeaderConfig,\n        ) => new StrategySheetColCell(node, spreadsheet, headerConfig),\n        dataSet: (spreadSheet: SpreadSheet) =>\n          new StrategySheetDataSet(spreadSheet),\n        showDefaultHeaderActionIcon: false,\n        style: {\n          colCell: {\n            hideValue: shouldHideValue,\n          },\n        },\n        interaction: {\n          autoResetSheetStyle: true,\n          // 趋势分析表禁用 刷选, 多选, 区间多选\n          brushSelection: false,\n          selectedCellMove: false,\n          multiSelection: false,\n          rangeSelection: false,\n        },\n        tooltip: {\n          operation: {\n            hiddenColumns: true,\n          },\n        },\n      };\n    });\n\n    const s2Options = computed<S2Options>(() =>\n      customMerge<S2Options>(strategySheetOptions.value, options?.value),\n    );\n\n    return {\n      s2Ref,\n      s2Options,\n      themeCfg,\n    };\n  },\n  components: {\n    BaseSheet,\n  },\n});\n</script>\n\n<template>\n  <BaseSheet\n    v-bind=\"$props\"\n    ref=\"s2Ref\"\n    :options=\"s2Options\"\n    :themeCfg=\"themeCfg\"\n  />\n</template>\n"],"names":[],"mappings":";;;;;;;;;AAkBA,MAAA,YAAe,gBAAgB;AAAA,EAC7B,MAAM;AAAA,EACN,OAAO,mBAAA;AAAA,EACP,OAAO,CAAA;AAAA,EACP,MAAM,OAAO,KAAK;AAChB,UAAM,QAAQ,UAAU,IAAI,MAAM;AAClC,UAAM,EAAE,SAAS,UAAU,QAAA,IAAY,OAAO,KAAK;AAEnD,UAAM,uBAAuB,SAAoC,MAAM;;AACrE,UAAI,QAAQ,QAAQ,KAAK,GAAG;AAC1B,eAAO;AAAA,MACT;AAGA,YAAM,kBAAkB,MAAK,mBAAQ,UAAR,mBAAe,WAAf,mBAAuB,MAAM,MAAM;AAEhE,aAAO;AAAA,QACL,eAAe;AAAA,QACf,UAAU,CAAC,UAAU,gBACnB,IAAI,sBAAsB,UAAU,WAAW;AAAA,QACjD,SAAS,CACP,MACA,aACA,iBACG,IAAI,qBAAqB,MAAM,aAAa,YAAY;AAAA,QAC7D,SAAS,CAAC,gBACR,IAAI,qBAAqB,WAAW;AAAA,QACtC,6BAA6B;AAAA,QAC7B,OAAO;AAAA,UACL,SAAS;AAAA,YACP,WAAW;AAAA,UAAA;AAAA,QACb;AAAA,QAEF,aAAa;AAAA,UACX,qBAAqB;AAAA;AAAA,UAErB,gBAAgB;AAAA,UAChB,kBAAkB;AAAA,UAClB,gBAAgB;AAAA,UAChB,gBAAgB;AAAA,QAAA;AAAA,QAElB,SAAS;AAAA,UACP,WAAW;AAAA,YACT,eAAe;AAAA,UAAA;AAAA,QACjB;AAAA,MACF;AAAA,IAEJ,CAAC;AAED,UAAM,YAAY;AAAA,MAAoB,MACpC,YAAuB,qBAAqB,OAAO,mCAAS,KAAK;AAAA,IAAA;AAGnE,WAAO;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,IAAA;AAAA,EAEJ;AAAA,EACA,YAAY;AAAA,IACV;AAAA,EAAA;AAEJ,CAAC;"}