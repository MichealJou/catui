{"version":3,"file":"col-cell-tooltip.vue2.js","sources":["../../../../../src/components/sheets/strategy-sheet/custom-tooltip/col-cell-tooltip.vue"],"sourcesContent":["<script lang=\"ts\">\nimport type { Node } from '@antv/s2';\nimport { getStrategySheetTooltipClsName as tooltipCls } from '@antv/s2';\nimport { isFunction } from 'lodash';\nimport { defineComponent, computed, type PropType } from 'vue';\nimport type { CustomTooltipProps } from './interface';\n\nexport default defineComponent({\n  name: 'StrategySheetColCellTooltip',\n  props: {\n    cell: {\n      type: Object as PropType<CustomTooltipProps['cell']>,\n      required: true,\n    },\n    label: {\n      type: [Object, Function] as PropType<CustomTooltipProps['label']>,\n      default: undefined,\n    },\n  },\n  setup(props) {\n    const meta = computed(() => props.cell.getMeta() as Node);\n\n    const shouldHide = computed(() => {\n      // 趋势分析表叶子节点显示是指标标题, tooltip 中没必要再显示了\n      return meta.value.isLeaf && meta.value.level !== 0;\n    });\n\n    const cellName = computed(() => {\n      const m = meta.value;\n      const name = m.spreadsheet.dataSet.getFieldName(m.field!);\n      const customLabel = isFunction(props.label)\n        ? props.label(props.cell, name)\n        : props.label;\n\n      return customLabel ?? name;\n    });\n\n    const cellValue = computed(() => meta.value.value);\n\n    return {\n      tooltipCls,\n      shouldHide,\n      cellName,\n      cellValue,\n    };\n  },\n});\n</script>\n\n<template>\n  <div v-if=\"!shouldHide\" :class=\"[tooltipCls(), tooltipCls('col')]\">\n    <span :class=\"tooltipCls('name')\">{{ cellName }}</span>\n    <span :class=\"tooltipCls('value')\">{{ cellValue }}</span>\n  </div>\n</template>\n\n<style lang=\"less\">\n@import './index.less';\n</style>\n"],"names":["tooltipCls"],"mappings":";;;AAOA,MAAA,YAAe,gBAAgB;AAAA,EAC7B,MAAM;AAAA,EACN,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,UAAU;AAAA,IAAA;AAAA,IAEZ,OAAO;AAAA,MACL,MAAM,CAAC,QAAQ,QAAQ;AAAA,MACvB,SAAS;AAAA,IAAA;AAAA,EACX;AAAA,EAEF,MAAM,OAAO;AACX,UAAM,OAAO,SAAS,MAAM,MAAM,KAAK,SAAiB;AAExD,UAAM,aAAa,SAAS,MAAM;AAEhC,aAAO,KAAK,MAAM,UAAU,KAAK,MAAM,UAAU;AAAA,IACnD,CAAC;AAED,UAAM,WAAW,SAAS,MAAM;AAC9B,YAAM,IAAI,KAAK;AACf,YAAM,OAAO,EAAE,YAAY,QAAQ,aAAa,EAAE,KAAM;AACxD,YAAM,cAAc,WAAW,MAAM,KAAK,IACtC,MAAM,MAAM,MAAM,MAAM,IAAI,IAC5B,MAAM;AAEV,aAAO,oCAAe;AAAA,IACxB,CAAC;AAED,UAAM,YAAY,SAAS,MAAM,KAAK,MAAM,KAAK;AAEjD,WAAO;AAAA,MAAA,YACLA;AAAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA;AAAA,EAEJ;AACF,CAAC;"}