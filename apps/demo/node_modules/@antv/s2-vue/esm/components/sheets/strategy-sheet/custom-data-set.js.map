{"version":3,"file":"custom-data-set.js","sources":["../../../../src/components/sheets/strategy-sheet/custom-data-set.ts"],"sourcesContent":["import {\n  CustomGridPivotDataSet,\n  EMPTY_EXTRA_FIELD_PLACEHOLDER,\n  EXTRA_FIELD,\n  i18n,\n  type Meta,\n  type RawData,\n  type S2DataConfig,\n} from '@antv/s2';\nimport { isEmpty, isObject, keys } from 'lodash';\n\nexport class StrategySheetDataSet extends CustomGridPivotDataSet {\n  getExistValuesByDataItem(data: RawData) {\n    const result = keys(data).filter((key) => isObject(data[key]));\n\n    if (isEmpty(result)) {\n      result.push(EMPTY_EXTRA_FIELD_PLACEHOLDER);\n    }\n\n    return result;\n  }\n\n  processDataCfg(dataCfg: S2DataConfig): S2DataConfig {\n    const updatedDataCfg = super.processDataCfg(dataCfg);\n\n    const newMeta: Meta[] = this.processMeta(dataCfg.meta, i18n('数值'));\n\n    return {\n      ...updatedDataCfg,\n      meta: newMeta,\n      fields: {\n        ...updatedDataCfg.fields,\n        rows: [...(dataCfg.fields.rows || []), EXTRA_FIELD],\n      },\n    };\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAWO,MAAM,6BAA6B,uBAAuB;AAAA,EAC/D,yBAAyB,MAAe;AACtC,UAAM,SAAS,KAAK,IAAI,EAAE,OAAO,CAAC,QAAQ,SAAS,KAAK,GAAG,CAAC,CAAC;AAE7D,QAAI,QAAQ,MAAM,GAAG;AACnB,aAAO,KAAK,6BAA6B;AAAA,IAC3C;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,eAAe,SAAqC;AAClD,UAAM,iBAAiB,MAAM,eAAe,OAAO;AAEnD,UAAM,UAAkB,KAAK,YAAY,QAAQ,MAAM,KAAK,IAAI,CAAC;AAEjE,WAAO,iCACF,iBADE;AAAA,MAEL,MAAM;AAAA,MACN,QAAQ,iCACH,eAAe,SADZ;AAAA,QAEN,MAAM,CAAC,GAAI,QAAQ,OAAO,QAAQ,CAAA,GAAK,WAAW;AAAA,MAAA;AAAA,IACpD;AAAA,EAEJ;AACF;"}